<%- include('partials/header')%>
<div class="container mt-5">
  <div class="card">
    <div class="card-header">
      <h1>Guests Index</h1>
    </div>
    <div class="card-body">
      <form action="" method="get">
        <input type="hidden" name="page" value="i">
        <div class="row mb-3">
          <label for="title" class="col-sm-2 col-form-label">Title</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="title" name="title" value="<%= query.title %>" />
          </div>
        </div>

        <div class="row mb-3">
          <label for="complete" class="col-sm-2 col-form-label">Complete</label>
          <div class="col-sm-10">
            <select name="complete" id="complete" class="form-control">
              <option value="">--Choose below--</option>
              <option value="false" <%= query.complete == 'false' ? ' selected' : '' %>>Not Yet</option>
              <option value="true" <%= query.complete == 'true' ? ' selected' : '' %>>Done</option>
            </select>
          </div>
        </div>

        <button type="submit" class="btn btn-primary">Search</button>
        <a href="/" class="btn btn-warning">Reset</a>
      </form>
      <hr />
    </div>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>NO.</th>
          <th>Title</th>
          <th>Complete</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% data.forEach((item, index) => { %>
        <tr>
          <td>
            <%= index + 1 + offset %>
          </td>
          <td>
            <%= item.title %>
          </td>
          <td>
            <%= item.complete ? 'Done' : 'Not Yet' %>
          </td>
          <td>
            <a href="" class="btn btn-success"><i class="fa-solid fa-pencil"></i></a>
            <a href="" class="btn btn-danger"><i class="fa-solid fa-trash"></i></a>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
    <div class="card-footer">
      <div class="row">
        <div class="col-md-2">
          <a href="/add" class="btn btn-primary"><i class="fa-solid fa-circle-plus"></i>Add</a>
        </div>
        <div class="col-md-10">
          <nav aria-label="Page navigation example">
            <ul class="pagination">
              <li class="page-item">
                <a class="page-link" href="#" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
              <% for(let i = 1; i <= pages; i++ ) { %>
              <li class="page-item<%= i == page ? ' active ' : '' %>"><a class="page-link" href="<%= url.replace('page=${page}','page=${i}') %>"><%= i %></a></li>
              <% } %>
              <li class="page-item">
                <a class="page-link" href="#" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <%- include('partials/footer')%>
</div>
